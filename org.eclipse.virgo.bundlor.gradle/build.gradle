plugins {
	id 'groovy'
	id 'eclipse'
	id 'java-gradle-plugin'
	id 'maven-publish'
}

description = 'Bundlor Gradle Plugin'

//jar {
//	from "$rootDir/build-bundlor/resources/about"
//	from project(':org.eclipse.virgo.bundlor.ant').configurations.compile.collect {
//		it.isDirectory() ? it : zipTree(it)
//	}
//	from project(':org.eclipse.virgo.bundlor.ant').configurations.archives.allArtifacts.files.collect {
//		zipTree(it)
//	}
//	duplicatesStrategy 'exclude'
//	manifest {
//		attributes(
//			'Implementation-Version': version
//		)
//	}
//}

repositories {
	mavenCentral()
}

dependencies {
	compile localGroovy()
	testCompile "junit:junit:${junitVersion}"
}

gradlePlugin {
	plugins {
		bundlor {
			group = 'org.eclipse.virgo.bundlor'
			id = 'org.eclipse.virgo.bundlor'
			implementationClass = 'org.eclipse.virgo.bundlor.BundlorPlugin'
		}
	}
}

publishing {
	repositories {
		mavenLocal()
	}
	publications {
		bundlorGradle(MavenPublication) {
			from components.java
			groupId 'org.eclipse.virgo.bundlor'
		}
	}
}
